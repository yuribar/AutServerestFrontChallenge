{"version":3,"file":"serialize.js","names":["_sdk","require","_state","_default","value","isDomObject","stringifyAsDom","serialize","getSerializeOptions","exports","default","stepsFromCommands","maxArgumentDepth","maxDepth","maxArgumentLength","maxLength","getConfig","nonNullReplacerWithDomSupport","Cypress","dom","isDom","stringify","_","undefined","module"],"sources":["../../../src/browser/serialize.ts"],"sourcesContent":["import { serialize } from \"allure-js-commons/sdk\";\nimport { getConfig } from \"./state.js\";\n\nexport default (value: unknown) =>\n  isDomObject(value) ? stringifyAsDom(value) : serialize(value, getSerializeOptions());\n\nconst getSerializeOptions = () => {\n  const {\n    stepsFromCommands: { maxArgumentDepth: maxDepth, maxArgumentLength: maxLength },\n  } = getConfig();\n\n  return { maxDepth, maxLength, nonNullReplacerWithDomSupport };\n};\n\nconst isDomObject = (value: unknown): value is object =>\n  typeof value === \"object\" && value !== null && Cypress.dom.isDom(value);\n\n// @ts-ignore\nconst stringifyAsDom = (value: object) => Cypress.dom.stringify(value, \"long\");\n\nconst nonNullReplacerWithDomSupport = (_: string, value: unknown) => {\n  if (typeof value === \"object\") {\n    // Exclude null properties to make the result more compact.\n    if (value === null) {\n      return undefined;\n    }\n\n    if (Cypress.dom.isDom(value)) {\n      // Window, document, and DOM element properties are serialized with Cypress.dom.stringify.\n      return stringifyAsDom(value);\n    }\n  }\n\n  // Use the implementation from allure-js-commons/sdk in all other cases.\n  return value;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAAuC,IAAAE,QAAA,GAEvBC,KAAc,IAC5BC,WAAW,CAACD,KAAK,CAAC,GAAGE,cAAc,CAACF,KAAK,CAAC,GAAG,IAAAG,cAAS,EAACH,KAAK,EAAEI,mBAAmB,CAAC,CAAC,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAP,QAAA;AAEtF,IAAMK,mBAAmB,GAAGA,CAAA,KAAM;EAChC,IAAM;IACJG,iBAAiB,EAAE;MAAEC,gBAAgB,EAAEC,QAAQ;MAAEC,iBAAiB,EAAEC;IAAU;EAChF,CAAC,GAAG,IAAAC,gBAAS,EAAC,CAAC;EAEf,OAAO;IAAEH,QAAQ;IAAEE,SAAS;IAAEE;EAA8B,CAAC;AAC/D,CAAC;AAED,IAAMZ,WAAW,GAAID,KAAc,IACjC,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,IAAIc,OAAO,CAACC,GAAG,CAACC,KAAK,CAAChB,KAAK,CAAC;;AAEzE;AACA,IAAME,cAAc,GAAIF,KAAa,IAAKc,OAAO,CAACC,GAAG,CAACE,SAAS,CAACjB,KAAK,EAAE,MAAM,CAAC;AAE9E,IAAMa,6BAA6B,GAAGA,CAACK,CAAS,EAAElB,KAAc,KAAK;EACnE,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B;IACA,IAAIA,KAAK,KAAK,IAAI,EAAE;MAClB,OAAOmB,SAAS;IAClB;IAEA,IAAIL,OAAO,CAACC,GAAG,CAACC,KAAK,CAAChB,KAAK,CAAC,EAAE;MAC5B;MACA,OAAOE,cAAc,CAACF,KAAK,CAAC;IAC9B;EACF;;EAEA;EACA,OAAOA,KAAK;AACd,CAAC;AAACoB,MAAA,CAAAf,OAAA,GAAAA,OAAA,CAAAC,OAAA","ignoreList":[]}