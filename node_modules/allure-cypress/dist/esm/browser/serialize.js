import { serialize } from "allure-js-commons/sdk";
import { getConfig } from "./state.js";
export default (value => isDomObject(value) ? stringifyAsDom(value) : serialize(value, getSerializeOptions()));
var getSerializeOptions = () => {
  var {
    stepsFromCommands: {
      maxArgumentDepth: maxDepth,
      maxArgumentLength: maxLength
    }
  } = getConfig();
  return {
    maxDepth,
    maxLength,
    nonNullReplacerWithDomSupport
  };
};
var isDomObject = value => typeof value === "object" && value !== null && Cypress.dom.isDom(value);

// @ts-ignore
var stringifyAsDom = value => Cypress.dom.stringify(value, "long");
var nonNullReplacerWithDomSupport = (_, value) => {
  if (typeof value === "object") {
    // Exclude null properties to make the result more compact.
    if (value === null) {
      return undefined;
    }
    if (Cypress.dom.isDom(value)) {
      // Window, document, and DOM element properties are serialized with Cypress.dom.stringify.
      return stringifyAsDom(value);
    }
  }

  // Use the implementation from allure-js-commons/sdk in all other cases.
  return value;
};
//# sourceMappingURL=serialize.js.map