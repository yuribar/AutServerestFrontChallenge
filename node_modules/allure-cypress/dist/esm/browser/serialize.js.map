{"version":3,"file":"serialize.js","names":["serialize","getConfig","value","isDomObject","stringifyAsDom","getSerializeOptions","stepsFromCommands","maxArgumentDepth","maxDepth","maxArgumentLength","maxLength","nonNullReplacerWithDomSupport","Cypress","dom","isDom","stringify","_","undefined"],"sources":["../../../src/browser/serialize.ts"],"sourcesContent":["import { serialize } from \"allure-js-commons/sdk\";\nimport { getConfig } from \"./state.js\";\n\nexport default (value: unknown) =>\n  isDomObject(value) ? stringifyAsDom(value) : serialize(value, getSerializeOptions());\n\nconst getSerializeOptions = () => {\n  const {\n    stepsFromCommands: { maxArgumentDepth: maxDepth, maxArgumentLength: maxLength },\n  } = getConfig();\n\n  return { maxDepth, maxLength, nonNullReplacerWithDomSupport };\n};\n\nconst isDomObject = (value: unknown): value is object =>\n  typeof value === \"object\" && value !== null && Cypress.dom.isDom(value);\n\n// @ts-ignore\nconst stringifyAsDom = (value: object) => Cypress.dom.stringify(value, \"long\");\n\nconst nonNullReplacerWithDomSupport = (_: string, value: unknown) => {\n  if (typeof value === \"object\") {\n    // Exclude null properties to make the result more compact.\n    if (value === null) {\n      return undefined;\n    }\n\n    if (Cypress.dom.isDom(value)) {\n      // Window, document, and DOM element properties are serialized with Cypress.dom.stringify.\n      return stringifyAsDom(value);\n    }\n  }\n\n  // Use the implementation from allure-js-commons/sdk in all other cases.\n  return value;\n};\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,uBAAuB;AACjD,SAASC,SAAS,QAAQ,YAAY;AAEtC,gBAAgBC,KAAc,IAC5BC,WAAW,CAACD,KAAK,CAAC,GAAGE,cAAc,CAACF,KAAK,CAAC,GAAGF,SAAS,CAACE,KAAK,EAAEG,mBAAmB,CAAC,CAAC,CAAC;AAEtF,IAAMA,mBAAmB,GAAGA,CAAA,KAAM;EAChC,IAAM;IACJC,iBAAiB,EAAE;MAAEC,gBAAgB,EAAEC,QAAQ;MAAEC,iBAAiB,EAAEC;IAAU;EAChF,CAAC,GAAGT,SAAS,CAAC,CAAC;EAEf,OAAO;IAAEO,QAAQ;IAAEE,SAAS;IAAEC;EAA8B,CAAC;AAC/D,CAAC;AAED,IAAMR,WAAW,GAAID,KAAc,IACjC,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,IAAIU,OAAO,CAACC,GAAG,CAACC,KAAK,CAACZ,KAAK,CAAC;;AAEzE;AACA,IAAME,cAAc,GAAIF,KAAa,IAAKU,OAAO,CAACC,GAAG,CAACE,SAAS,CAACb,KAAK,EAAE,MAAM,CAAC;AAE9E,IAAMS,6BAA6B,GAAGA,CAACK,CAAS,EAAEd,KAAc,KAAK;EACnE,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B;IACA,IAAIA,KAAK,KAAK,IAAI,EAAE;MAClB,OAAOe,SAAS;IAClB;IAEA,IAAIL,OAAO,CAACC,GAAG,CAACC,KAAK,CAACZ,KAAK,CAAC,EAAE;MAC5B;MACA,OAAOE,cAAc,CAACF,KAAK,CAAC;IAC9B;EACF;;EAEA;EACA,OAAOA,KAAK;AACd,CAAC","ignoreList":[]}